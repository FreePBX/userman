<module>
	<rawname>userman</rawname>
	<name>User Management</name>
	<version>16.0.41</version>
	<publisher>Sangoma Technologies Corporation</publisher>
	<license>AGPLv3+</license>
	<licenselink>http://www.gnu.org/licenses/agpl-3.0.txt</licenselink>
	<repo>standard</repo>
	<description>
		This Module manages all PBX users. It allows an Administrator to create a User Account that can be used by other applications for login or API purposes.
	</description>
  	<more-info>https://wiki.freepbx.org/display/FPG/User+Management+Module</more-info>
	<changelog>
		*16.0.41* Packaging of ver 16.0.41
		*16.0.40* FREEI-5815 
		*16.0.39* FREEI-5720 
		*16.0.38* FREEI-5522 
		*16.0.37* FREEI-5522 
		*16.0.36*   FREEI-4700 Integrated password management
		*16.0.35.11* Packaging of ver 16.0.35.11
		*16.0.35.10* FREEI-5522 
		*16.0.35.9* FREEI-5198 
		*16.0.35.8* Packaging of ver 16.0.35.8
		*16.0.35.7* FREEI-5198 added option to turn on sync logs from userman 
		*16.0.35.6* FREEI-5209 
		*16.0.35.5* Packaging of ver 16.0.35.5
		*16.0.35.4* Packaging of ver 16.0.35.4
		*16.0.35.3* FREEPBX-23601 
		*16.0.35.2* Packaging of ver 16.0.35.2
		*16.0.35.1* bump 
		*16.0.35* Packaging of ver 16.0.35
		*16.0.34* bump 
		*16.0.30* Reverting Bootstrap and dependent libs fixes 
		*16.0.29* FREEI-4777 
		*16.0.28* FREEI-4741 
		*16.0.27* FREEPBX-23420 
		*16.0.26*    FREEPBX-23160 , FREEPBX-23411 
		*16.0.25.32* FREEI-4663 and FREEI-4602
		*16.0.25.31* Packaging of ver 16.0.25.31
		*16.0.25.30* Packaging of ver 16.0.25.30
		*16.0.25.29* FREEPBX-23120 Corrected username config option format according to Adldap2 documentation 
		*16.0.25.28* FREEPBX-23120 and FREEPBX-22854 
		*16.0.25.27* FREEPBX-23133 
		*16.0.25.26* FREEPBX-22854 
		*16.0.25.25* FREEPBX-23061 
		*16.0.25.24* FREEPBX-23115 and FREEPBX-23112 
		*16.0.25.23* FREEI-4041 
		*16.0.25.22* FREEI-1194 
		*16.0.25.21* FREEPBX-22980, FREEPBX-23114 , FREEPBX-23113 and FREEPBX-23116 
		*16.0.25.20* FREEPBX-22980: Error Sync to OpenLDAP, member users of each group 
		*16.0.25.19* FREEPBX-22980: Error Sync to OpenLDAP 
		*16.0.25.18* FREEI-4229 Added frontend validation for users password field 
		*16.0.25.17* FREEPBX-22980 Upgraded Adldap2/Adldap2 composer package 
		*16.0.25.16* FREEI-4107 Fixed warning messages misaligned inside the pop-up window 
		*16.0.25.15* FREEI-4025 Converted users post data from array to string before submitting form 
		*16.0.25.14* FREEI-4063 Added condition to display note only when there are error messages 
		*16.0.25.13* FREEI-4063 Added note about settings to password strength description 
		*16.0.25.12* FREEI-4062 Password complexity rules are enabled by default on upgrade 
		*16.0.25.11* Packaging of ver 16.0.25.11
		*16.0.25.10* Packaging of ver 16.0.25.10
		*16.0.25.9* Packaging of ver 16.0.25.9
		*16.0.25.8* FREEI-4064 userman auth settings - adjust the help text for a some policies 
		*16.0.25.7* FREEI-3161 Fixe conflicts for password policies, and tab button issues 
		*16.0.25.6* FREEPBX-22855 Fixing mutiple issues with button and whoups errors 
		*16.0.25.5* FREEPBX-22812 and FREEPBX-22828 
		*16.0.25.4* FREEPBX-22828 Don't auto-create extension and user UCP template features 
		*16.0.25.3* FREEPBX-22634 FREEPBX-22812 Unable to delete user from user manager without selecting a directory, Add button in Groups Tab allows to add a group if this one is disabled 
		*16.0.25.2* SCD-15 modified the checkCredentials method to include default_extension/password validation besides username/password validation 
		*16.0.25.1* Fixing FREEPBX-22635
		*16.0.25* FREEPBX-22792 FreePBX 15 Updates and Contact Manager 
		*16.0.24* FREEI-3765 Add a proper email for template creator 
		*16.0.23* FREEPBX-22602: Don't transform search query to lowercase 
		*16.0.22* FREEPBX-22700 FREEPBX-22702 UCP template install and Ldap directory issue 
		*16.0.21* FREEI-3688 added condition to restore new ucp tables data ('userman_template_settings' and 'userman_ucp_templates') 
		*16.0.20* Packaging of ver 16.0.20
		*16.0.19* SMOBILE-294 select by module from userman-settings 
		*16.0.18* FREEI-3369 Adding UCP template feature 
		*16.0.17* Packaging of ver 16.0.17
		*16.0.16* Packaging of ver 16.0.16
		*16.0.15* FREEI-3547: don't add AMPUSER/none/accountcode to asterisk database 
		*16.0.14* FREEI-3528: remove restapps_rtapi_conferences rows for deleted user 
		*16.0.13* FREEI-2691 Added condition to use password given in GQL query (addExtension/UpdateExtension) to access user control panel or else to generate a new random password 
		*16.0.12* FREEI-3350: set /AMPUSER/ext/accountcode to each extension's userId 
		*16.0.11* Packaging of ver 16.0.11
		*16.0.10* Add previous user e-mail address to extraData 
		*16.0.9* FREEPBX-21901: fixed data recovery 
		*16.0.8* FREEPBX-21902- Remove directory in table kvstore - v13 
		*16.0.7* FREEPBX-21782: Backup and restore all data modulo 
		*16.0.6* Packaging of ver 16.0.6
		*16.0.5* FREEPBX-20823: LDAP users, contact data is deleted 
		*16.0.4* FREEI-1623 Userman Delete button GUI improvement 
		*16.0.3* FREEI-1458 user manager: add instructions to select a directory to add users 
		*16.0.2* FREEI-1201 Ordering userman groups generates PHP error 
		*16.0.1alpha* 16.0.1 alpha release
	</changelog>
	<info/>
	<category>Admin</category>
	<menuitems>
		<userman needsenginedb="yes">User Management</userman>
	</menuitems>
	<depends>
		<phpversion>5.6.0</phpversion>
		<version>15.0.6.18</version>
		<module>core ge 13.0.84</module>
	</depends>
	<hooks>
		<core class="Core" namespace="FreePBX\modules">
			<method callingMethod="getQuickCreateDisplay" class="Userman" namespace="FreePBX\modules">getQuickCreateDisplay</method>
			<method callingMethod="processQuickCreate" class="Userman" namespace="FreePBX\modules">processQuickCreate</method>
		</core>
		<bulkhandler class="Bulkhandler" namespace="FreePBX\modules" priority="150">
			<method callingMethod="getHeaders" class="Userman" namespace="FreePBX\modules">bulkhandlerGetHeaders</method>
			<method callingMethod="getTypes" class="Userman" namespace="FreePBX\modules">bulkhandlerGetTypes</method>
			<method callingMethod="import" class="Userman" namespace="FreePBX\modules">bulkhandlerImport</method>
			<method callingMethod="export" class="Userman" namespace="FreePBX\modules">bulkhandlerExport</method>
		</bulkhandler>
		<userman class="Userman" namespace="FreePBX\modules">
			<method callingMethod="addGroup" class="Userman" namespace="FreePBX\modules">pwdAddGroup</method>
			<method callingMethod="updateGroup" class="Userman" namespace="FreePBX\modules">pwdUpdateGroup</method>
			<method callingMethod="addUser" class="Userman" namespace="FreePBX\modules">pwdAddUser</method>
			<method callingMethod="updateUser" class="Userman" namespace="FreePBX\modules">pwdUpdateUser</method>
			<method callingMethod="myShowPage" class="Userman" namespace="FreePBX\modules">pwdShowPage</method>
			<method callingMethod="delUser" class="Userman" namespace="FreePBX\modules">pwdDeleteUser</method>
			<method callingMethod="resetPasswordWithToken" class="Userman" namespace="FreePBX\modules">resetPasswordExpiry</method>
		</userman>
	</hooks>
	<database>
		<table name="userman_users">
			<field name="id" type="integer" primarykey="true" autoincrement="true"/>
			<field name="auth" type="string" length="150" default="freepbx" notnull="false"/>
			<field name="authid" type="string" length="750" notnull="false"/>
			<field name="username" type="string" length="150" notnull="false"/>
			<field name="description" type="string" length="255" notnull="false"/>
			<field name="password" type="string" length="255" notnull="false"/>
			<field name="default_extension" type="string" length="45" default="none"/>
			<field name="primary_group" type="integer" notnull="false"/>
			<field name="permissions" type="blob" notnull="false"/>
			<field name="fname" type="string" length="100" notnull="false"/>
			<field name="lname" type="string" length="100" notnull="false"/>
			<field name="displayname" type="string" length="200" notnull="false"/>
			<field name="title" type="string" length="100" notnull="false"/>
			<field name="company" type="string" length="100" notnull="false"/>
			<field name="department" type="string" length="100" notnull="false"/>
			<field name="language" type="string" length="100" notnull="false"/>
			<field name="timezone" type="string" length="100" notnull="false"/>
			<field name="dateformat" type="string" length="100" notnull="false"/>
			<field name="timeformat" type="string" length="100" notnull="false"/>
			<field name="datetimeformat" type="string" length="100" notnull="false"/>
			<field name="email" type="text" notnull="false"/>
			<field name="cell" type="string" length="100" notnull="false"/>
			<field name="work" type="string" length="100" notnull="false"/>
			<field name="home" type="string" length="100" notnull="false"/>
			<field name="fax" type="string" length="100" notnull="false"/>
			<key name="username_UNIQUE" type="unique">
				<column name="username"/>
				<column name="auth"/>
			</key>
		</table>
		<table name="userman_users_settings">
			<field name="uid" type="integer"/>
			<field name="module" type="string" length="65"/>
			<field name="key" type="string" length="190"/>
			<field name="val" type="blob"/>
			<field name="type" type="string" length="16" notnull="false"/>
			<key name="index4" type="unique">
				<column name="uid"/>
				<column name="module"/>
				<column name="key"/>
			</key>
			<key name="index2" type="index">
				<column name="uid"/>
				<column name="key"/>
			</key>
			<key name="index6" type="index">
				<column name="module"/>
				<column name="uid"/>
			</key>
		</table>
		<table name="userman_groups">
			<field name="id" type="integer" primarykey="true" autoincrement="true"/>
			<field name="auth" type="string" length="150" default="freepbx" notnull="false"/>
			<field name="authid" type="string" length="750" notnull="false"/>
			<field name="groupname" type="string" length="150" notnull="false"/>
			<field name="description" type="string" length="255" notnull="false"/>
			<field name="language" type="string" length="100" notnull="false"/>
			<field name="timezone" type="string" length="100" notnull="false"/>
			<field name="dateformat" type="string" length="100" notnull="false"/>
			<field name="timeformat" type="string" length="100" notnull="false"/>
			<field name="datetimeformat" type="string" length="100" notnull="false"/>
			<field name="priority" type="integer" default="5"/>
			<field name="users" type="blob" notnull="false"/>
			<field name="permissions" type="blob" notnull="false"/>
			<field name="local" type="integer" notnull="true" default="0"/>
			<key name="groupname_UNIQUE" type="unique">
				<column name="groupname"/>
				<column name="auth"/>
			</key>
		</table>
		<table name="userman_groups_settings">
			<field name="gid" type="integer"/>
			<field name="module" type="string" length="65"/>
			<field name="key" type="string" length="190"/>
			<field name="val" type="blob"/>
			<field name="type" type="string" length="16" notnull="false"/>
			<key name="index4" type="unique">
				<column name="gid"/>
				<column name="module"/>
				<column name="key"/>
			</key>
			<key name="index2" type="index">
				<column name="gid"/>
				<column name="key"/>
			</key>
			<key name="index6" type="index">
				<column name="module"/>
				<column name="gid"/>
			</key>
		</table>
		<table name="userman_directories">
			<field name="id" type="integer" primarykey="true" autoincrement="true"/>
			<field name="name" type="string" length="250" notnull="false"/>
			<field name="driver" type="string" length="150" default=""/>
			<field name="active" type="boolean" default="0"/>
			<field name="order" type="integer" default="5"/>
			<field name="default" type="boolean" default="0"/>
			<field name="locked" type="boolean" default="0"/>
		</table>
		<table name="userman_ucp_templates">
			<field name="id" type="integer" primarykey="true" autoincrement="true"/>
			<field name="templatename" type="string" length="150"/>
			<field name="description" type="string" length="255" notnull="false"/>
			<field name="importedfromuname" type="string" length="255" notnull="false"/>
			<field name="importedfromuid" type="string" length="255" notnull="false"/>
			<field name="defaultexten" type="string" length="255" notnull="false"/>
			<field name="hasupdated" type="boolean" default="0"/>
		</table>
		<table name="userman_template_settings">
			<field name="tid" type="integer"/>
			<field name="module" type="string" length="65"/>
			<field name="key" type="string" length="190"/>
			<field name="val" type="blob"/>
			<field name="type" type="string" length="16" notnull="false"/>
			<key name="index4" type="unique">
				<column name="tid"/>
				<column name="module"/>
				<column name="key"/>
			</key>
			<key name="index2" type="index">
				<column name="tid"/>
				<column name="key"/>
			</key>
			<key name="index6" type="index">
				<column name="module"/>
				<column name="tid"/>
			</key>
		</table>
		<table name="userman_password_reminder">
			<field name="id" type="integer" primarykey="true" autoincrement="true"/>
			<field name="uid" type="string" length="40" default=""/>
			<field name="username" type="string" length="40" default=""/>
			<field name="usermail" type="string" length="40" default=""/>
			<field name="usertype" type="string" length="20" default=""/>
			<field name="passwordChangedAt" type="datetime"/>
			<field name="passwordExpiryDate" type="datetime"/>
		</table>
	</database>
	<supported>
		<version>16.0</version>
	</supported>
	<console>
		<command>
			<name>userman</name>
		</command>
	</console>
</module>